<!DOCTYPE html>
<!--
Custom UI vs. odensc/phomemo-d30-web-bluetooth:
- Text tab: I add Font family, Bold/Italic/Underline/ALL CAPS, Alignment, Line height (×), Letter spacing (px), and Margin (px).
- Layout: I place "Font size" + "Margin" side-by-side; "Line height" + "Letter spacing" beneath.
- Fonts: I load Google Webfonts and add system options (Arial, Times New Roman, Courier New).
- Barcode/Image/QR remain unchanged.
-->
<html lang="en">
  <head>
    <title>Phomemo D30 Web Bluetooth</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
      integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Text tab: neutralize any CSS rotation from the core preview -->
    <style>
      #nav-text.show .card .card-body,
      #nav-text.show #canvas {
        transform: none !important;
      }
    </style>

    <link rel="stylesheet" href="index.css" />

    <!-- Webfonts for the font family selector -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Libre+Franklin:wght@400;700&family=Oswald:wght@400;700&family=Fredoka:wght@400;700&family=Baloo+2:wght@400;700&family=Libre+Baskerville:wght@400;700&family=JetBrains+Mono:wght@400;700&family=Alex+Brush&family=Caveat:wght@400;700&family=Stardos+Stencil:wght@400;700&family=Staatliches&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container my-4">
      <h1>Phomemo D30 Web Bluetooth</h1>

      <nav class="mb-3">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button class="nav-link active" id="nav-text-tab" data-bs-toggle="tab" data-bs-target="#nav-text" type="button" role="tab" aria-controls="nav-text" aria-selected="true">Text</button>
          <button class="nav-link" id="nav-barcode-tab" data-bs-toggle="tab" data-bs-target="#nav-barcode" type="button" role="tab" aria-controls="nav-barcode" aria-selected="false">Barcode</button>
          <button class="nav-link" id="nav-image-tab" data-bs-toggle="tab" data-bs-target="#nav-image" type="button" role="tab" aria-controls="nav-image" aria-selected="false">Image</button>
          <button class="nav-link" id="nav-qr-tab" data-bs-toggle="tab" data-bs-target="#nav-qr" type="button" role="tab" aria-controls="nav-qr" aria-selected="false">QR Code</button>
        </div>
      </nav>

      <form class="col-lg-6">
        <div class="tab-content mb-3" id="nav-tabContent">
          <!-- TEXT TAB -->
          <div class="tab-pane show active" id="nav-text" role="tabpanel" aria-labelledby="nav-text-tab" tabindex="0">
            <h2>Text</h2>

            <!-- Font size + Margin -->
            <div class="row g-2 align-items-end mb-2">
              <div class="col-6">
                <label for="inputFontSize" class="form-label">Font size</label>
                <div class="input-group">
                  <input
                    type="number"
                    step="1"
                    min="8"
                    value="32"
                    class="form-control flex-grow-0"
                    style="width: 5rem"
                    id="inputFontSize"
                  />
                  <span class="input-group-text">px</span>
                </div>
              </div>
              <div class="col-6">
                <label for="advMargin" class="form-label">Margin</label>
                <div class="input-group">
                  <input
                    type="number"
                    min="0"
                    max="30"
                    value="6"
                    class="form-control flex-grow-0"
                    style="width: 5rem"
                    id="advMargin"
                  />
                  <span class="input-group-text">px</span>
                </div>
              </div>
            </div>

            <!-- Line height + Letter spacing -->
            <div class="row g-2 align-items-end mb-3">
              <div class="col-6">
                <label for="advLineHeight" class="form-label">Line height</label>
                <div class="input-group">
                  <input id="advLineHeight" type="number" step="0.1" min="1.0" max="2.0" value="1.2" class="form-control flex-grow-0" style="width: 5rem"/>
                  <span class="input-group-text">×</span>
                </div>
              </div>
              <div class="col-6">
                <label for="advLetterSpacing" class="form-label">Letter spacing</label>
                <div class="input-group">
                  <input id="advLetterSpacing" type="number" step="0.5" min="0" max="10" value="0" class="form-control flex-grow-0" style="width: 5rem"/>
                  <span class="input-group-text">px</span>
                </div>
              </div>
            </div>

            <!-- Font + Alignment -->
            <div class="row g-2 mb-3">
              <div class="col-12 col-md-6">
                <label for="advFontFamily" class="form-label">Font family</label>
                <select id="advFontFamily" class="form-select">
                  <option>Arial</option>
                  <option>Times New Roman</option>
                  <option>Courier New</option>
                  <option>Inter</option>
                  <option>Libre Franklin</option>
                  <option>Oswald</option>
                  <option>Staatliches</option>
                  <option>Fredoka</option>
                  <option>Baloo 2</option>
                  <option>Libre Baskerville</option>
                  <option>JetBrains Mono</option>
                  <option>Alex Brush</option>
                  <option>Caveat</option>
                  <option>Stardos Stencil</option>
                </select>
              </div>
              <div class="col-12 col-md-6">
                <label for="advAlign" class="form-label">Alignment</label>
                <select id="advAlign" class="form-select">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>

            <!-- Styles -->
            <div class="d-flex gap-3 mb-3 flex-wrap">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="advBold">
                <label class="form-check-label" for="advBold">Bold</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="advItalic">
                <label class="form-check-label" for="advItalic">Italic</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="advUnderline">
                <label class="form-check-label" for="advUnderline">Underline</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="advUpper">
                <label class="form-check-label" for="advUpper">ALL CAPS</label>
              </div>
            </div>

            <label for="inputText" class="form-label">Text to print</label>
            <textarea class="form-control" id="inputText">Hello world</textarea>
          </div>

          <!-- BARCODE TAB -->
          <div class="tab-pane" id="nav-barcode" role="tabpanel" aria-labelledby="nav-barcode-tab" tabindex="0">
            <h2>Barcode</h2>
            <label for="inputBarcode" class="form-label">Barcode data (CODE128)</label>
            <input type="text" class="form-control" value="123456" id="inputBarcode" />
          </div>

          <!-- IMAGE TAB -->
          <div class="tab-pane" id="nav-image" role="tabpanel" aria-labelledby="nav-image-tab" tabindex="0">
            <h2>Image</h2>
            <label for="inputImage" class="form-label">Image file</label>
            <input type="file" class="form-control" id="inputImage" />
          </div>

          <!-- QR TAB -->
          <div class="tab-pane" id="nav-qr" role="tabpanel" aria-labelledby="nav-qr-tab" tabindex="0">
            <h2>QR Code</h2>
            <label for="inputQR" class="form-label">QR code data</label>
            <input type="text" class="form-control" value="https://example.com" id="inputQR" />
          </div>
        </div>

        <div>
          <h2>Label size</h2>
          <div class="input-group mb-3">
            <span class="input-group-text">Width (mm)</span>
            <input type="number" step="1" class="form-control" value="40" aria-label="Width" id="inputWidth" />
            <span class="input-group-text">Height (mm)</span>
            <input type="number" step="1" class="form-control" value="12" aria-label="Height" id="inputHeight" />
          </div>
        </div>

        <div class="d-flex flex-column align-items-start mb-3">
          <h2>Preview</h2>
          <p>Images are sent to printer vertically.</p>
          <div class="card shadow-sm">
            <div class="card-body p-1">
              <canvas id="canvas"></canvas>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary">Connect &amp; print</button>
      </form>
    </div>

    <div class="toast-container position-fixed bottom-0 start-0 p-3">
      <div id="errorToast" class="toast align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body">
            <span id="errorText"></span>
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.6/JsBarcode.all.min.js" integrity="sha512-k2wo/BkbloaRU7gc/RkCekHr4IOVe10kYxJ/Q8dRPl7u3YshAQmg3WfZtIcseEk+nGBdK03fHBeLgXTxRmWCLQ==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js" integrity="sha512-PEhlWBZBrQL7flpJPY8lXx8tIN7HWX912GzGhFTDqA3iWFrakVH3lVHomCoU9BhfKzgxfEk6EG2C3xej+9srOQ==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>

    <!-- Our add-on (loads index.core.js internally) -->
    <script type="module" src="index.js" defer></script>
  </body>
</html>
